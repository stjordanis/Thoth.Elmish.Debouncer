<html class="has-navbar-fixed-top"><head><title>Thoth.Elmish.Debouncer Â· Thoth.Elmish.Debouncer</title><meta http-equiv="Content-Type" content="text/html; charset=utf-8"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="stylesheet" type="text/css" href="/Thoth.Elmish.Debouncer/style.css"/><link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.7.2/css/all.css" integrity="sha384-fnmOCqbTlWIlj8LyTjo7mOUStjsKC4pOpQbqyi7RrhN7udi9RwhKkMHpvLbHG9Sr" crossorigin="anonymous"/><script src="https://polyfill.app/api/polyfill?features=scroll-behavior"></script><script type="text/javascript">
var nacara = {};
                                    </script><script type="text/javascript">window.addEventListener("DOMContentLoaded", () => {
    /*
     * Initialize the menu state
     */

    // Set as active the menu for the current page
    document
        .querySelectorAll(`.menu [data-menu-id='${nacara.pageId}']`)
        .forEach(function (menuItem) {
            menuItem.classList.add("is-active")
        });

    // Collapse menu-group which doesn't concerns the current page
    document
        .querySelectorAll(`.menu .menu-group`)
        .forEach(function (menuGroup) {
            var parentChildren = Array.from(menuGroup.parentElement.children);
            var subItems = parentChildren.find(function (child) {
                return child.nodeName === "UL";
            });

            var activeMenu =
                Array.from(subItems.children)
                    .find(function (child) {
                        return child.firstChild.classList.contains("is-active")
                    });

            if (activeMenu === undefined) {
                menuGroup.classList.remove("is-expanded");
                subItems.style.display = "none";
            } else {
                menuGroup.classList.add("is-expanded");
                subItems.style.display = "block";
            }
        });

    // Register listener to handle menu-group
    document
        .querySelectorAll(`.menu .menu-group`)
        .forEach(function (menuGroup) {
            menuGroup.addEventListener("click", function (ev) {
                // All the menu "calculation" are done relative to the .menu-group element
                var menuGroup =
                    ev.target.classList.contains("menu-group")
                        ? ev.target
                        : ev.target.closest(".menu-group");

                var parentChildren = Array.from(menuGroup.parentElement.children);

                var subItems =
                    parentChildren.find(function (child) {
                        return child.nodeName === "UL";
                    });

                if (menuGroup.classList.contains("is-expanded")) {
                    menuGroup.classList.remove("is-expanded");
                    subItems.style.display = "none";
                } else {
                    menuGroup.classList.add("is-expanded");
                    subItems.style.display = "block";
                }

            });
        });

    /*
     * Setup menu navigation via Next and Previous button
     */

    // Start the counter from -1, but the first menu item will be 0
    let computedMaxRank = -1;

    document
        .querySelectorAll(`.menu [data-menu-id]`)
        .forEach(function (menuItem) {
            computedMaxRank++;
            menuItem.setAttribute("data-menu-rank", computedMaxRank);
        });

    document
        .querySelector(".navigate-to-previous")
        .addEventListener("click", () => {
            const currentMenuRank =
                document
                    .querySelector(`.menu [data-menu-id='${nacara.pageId}']`)
                    .getAttribute("data-menu-rank");

            const previousRank = parseInt(currentMenuRank) - 1;

            if (previousRank >= 0) {
                document
                    .querySelector(`.menu [data-menu-rank='${previousRank}']`)
                    .click();
            }
        });

    document
        .querySelector(".navigate-to-next")
        .addEventListener("click", () => {
            const currentMenuRank =
                document
                    .querySelector(`.menu [data-menu-id='${nacara.pageId}']`)
                    .getAttribute("data-menu-rank")

            const nextRank = parseInt(currentMenuRank) + 1;

            if (nextRank <= computedMaxRank) {
                document
                    .querySelector(`.menu [data-menu-rank='${nextRank}']`)
                    .click();
            }
        });

    // IIFE function in order to not pollute the function scope
    (() => {

        // The menu is an optional element, if no menu found then hide the Next & Previous buttons
        if (document.querySelector(".menu") === null) {
            document.querySelector(".navigate-to-next").style.visibility = "hidden"
            document.querySelector(".navigate-to-previous").style.visibility = "hidden"
            return;
        }

        const currentMenuRank =
            parseInt(
                document
                    .querySelector(`.menu [data-menu-id='${nacara.pageId}']`)
                    .getAttribute("data-menu-rank")
            );

        // Initialize the text of the Previous button
        if (currentMenuRank >= 1) {
            const previousText =
                document
                    .querySelector(`.menu [data-menu-rank='${currentMenuRank - 1}']`)
                    .textContent;

            document
                .querySelector(".navigate-to-previous .text")
                .textContent = previousText;
        }

        // Initialize the text of the Next button
        if (currentMenuRank < computedMaxRank) {
            const previousText =
                document
                    .querySelector(`.menu [data-menu-rank='${currentMenuRank + 1}']`)
                    .textContent;

            document
                .querySelector(".navigate-to-next .text")
                .textContent = previousText;
        }

        // Hide the navigation button depending on the page rank
        if (currentMenuRank == 0) {
            document.querySelector(".navigate-to-previous").style.visibility = "hidden";
        } else if (currentMenuRank == computedMaxRank) {
            document.querySelector(".navigate-to-next").style.visibility = "visibile";
        }
    })();


    /*
     * Setup menu burger behaviour
     */

    // Code copied from Bulma documentation
    // https://bulma.io/documentation/components/navbar/#navbar-menu

    // Get all "navbar-burger" elements
    const $navbarBurgers = Array.prototype.slice.call(document.querySelectorAll('.navbar-burger'), 0);

    // Check if there are any navbar burgers
    if ($navbarBurgers.length > 0) {

        // Add a click event on each of them
        $navbarBurgers.forEach(el => {
            el.addEventListener('click', () => {

                // Get the target from the "data-target" attribute
                const target = el.dataset.target;
                const $target = document.getElementById(target);

                // Toggle the "is-active" class on both the "navbar-burger" and the "navbar-menu"
                el.classList.toggle('is-active');
                $target.classList.toggle('is-active');

            });
        });
    }

    const mobileMenuTrigger = document.querySelector(".mobile-menu .menu-trigger");

    if (mobileMenuTrigger !== null) {
        mobileMenuTrigger
            .addEventListener("click", () => {
                document
                    .querySelector(".is-menu-column")
                    .classList
                    .toggle("force-show");
        });
    }

});
</script></head><body><nav class="navbar is-fixed-top"><div class="container"><div class="navbar-brand"><a class="navbar-item title is-4" href="https://thoth-org.github.io//Thoth.Elmish.Debouncer/">Thoth.Elmish.Debouncer</a><a class="navbar-item is-hidden-desktop" href="https://github.com/thoth-org/Thoth.Elmish.Debouncer" target="_blank"><span class="icon"><i class=" fab fa-github fa-lg"></i></span></a><a class="navbar-item is-hidden-desktop" href="https://twitter.com/MangelMaxime" target="_blank" style="color:#55acee"><span class="icon"><i class=" fab fa-twitter fa-lg"></i></span></a><div class="navbar-burger" data-target="nav-menu"><span></span><span></span><span></span></div></div><div class="navbar-menu" id="nav-menu"><div class="navbar-start"><a class="navbar-item">0.3.0</a></div><div class="navbar-end"><a class="navbar-item" href="/Thoth.Elmish.Debouncer/index.html" target="_self"><span class="icon"><i class=" fas fa-book fa-lg"></i></span><span>Documentation</span></a><a class="navbar-item" href="/Thoth.Elmish.Debouncer/changelog.html" target="_self"><span class="icon"><i class=" fas fa-tasks fa-lg"></i></span><span>Changelog</span></a><a class="navbar-item" href="https://gitter.im/fable-compiler/Fable" target="_blank"><span class="icon"><i class=" fab fa-gitter fa-lg"></i></span><span>Support</span></a><a class="navbar-item is-hidden-touch" href="https://github.com/thoth-org/Thoth.Elmish.Debouncer" target="_blank"><span class="icon"><i class=" fab fa-github fa-lg"></i></span></a><a class="navbar-item is-hidden-touch" href="https://twitter.com/MangelMaxime" target="_blank" style="color:#55acee"><span class="icon"><i class=" fab fa-twitter fa-lg"></i></span></a></div></div></div></nav><div class="container"><div><div class="columns is-mobile is-gapless"><div class="column is-hidden-touch is-menu-column is-2-desktop" style="padding-left:1.5rem !important"></div><div class="column full-height-scrollable-content toc-scrollable-container is-main-content is-full-touch is-8-desktop" style="scroll-behavior:smooth;overflow-x:hidden"><section class="section"><div class="content"><header class="page-header"><a class="button is-pulled-right is-primary is-outlined is-hidden-touch" target="_blank" href="https://github.com/thoth-org/Thoth.Elmish.Debouncer/edit/master/docs/index.md">Edit</a><h1>Thoth.Elmish.Debouncer</h1></header><div><p></p>
<h1>Debouncer <a href="#Debouncer" aria-hidden="true"><span class="anchor" id="Debouncer"></span></a></h1>
<h2>Kezako ? <a href="#Kezako" aria-hidden="true"><span class="anchor" id="Kezako"></span>#</a></h2>
<blockquote>
<p>Debouncing enforces that a function not be called again until a certain amount of time has passed without it being called. As in &quot;execute this function only if 100 milliseconds have passed without it being called.&quot;</p>
<p>Perhaps a function is called 1,000 times in a quick burst, dispersed over 3 seconds, then stops being called. If you have debounced it at 100 milliseconds, the function will only fire once, at 3.1 seconds, once the burst is over. Each time the function is called during the burst it resets the debouncing timer.</p>
<p><a href="https://css-tricks.com/the-difference-between-throttling-and-debouncing/">Source</a></p>
</blockquote>
<h2>Demo <a href="#Demo" aria-hidden="true"><span class="anchor" id="Demo"></span>#</a></h2>
<p>The demo works as follows:</p>
<ol>
<li>Ask the user to type something</li>
<li>The user <strong>is typing</strong></li>
<li>When the user <strong>stops typing</strong>, <strong>disable</strong> the input and <strong>inform</strong> the user.</li>
<li>After a <strong>short period</strong> of time, <strong>reset</strong> the demo.</li>
</ol>
<div class="columns">
    <div class="column is-6 is-offset-3">
        <div id="debouncer_demo"></div>
    </div>
</div>
<div class="has-text-centered">
<p><em><a href="https://github.com/MangelMaxime/Thoth/blob/master/demos/Thoth.Elmish.Demo/src/Debouncer.fs">View the code</a></em></p>
</div>
<script type="text/javascript" src="/Thoth.Elmish.Debouncer/demo/vendors.js"></script>
<script type="text/javascript" src="/Thoth.Elmish.Debouncer/demo/demo.js"></script>
<script type="text/javascript">
    startDemo("debouncer_demo");
</script>
<h2>How to use ? <a href="#How-to-use" aria-hidden="true"><span class="anchor" id="How-to-use"></span>#</a></h2>
<ol>
<li>Store the <code>Debouncer</code> instance in your model</li>
</ol>
<pre style="background-color: #FAFAFA;color: ;padding: 1em"><code><span style="color: #A0A1A7;font-style: italic">// Model definition</span>
<span style="color: #A626A4">type</span><span> </span><span style="color: #C18401">Model</span><span> </span><span style="color: #A626A4">=</span>
<span>    </span><span style="color: #A626A4">{</span><span> Debouncer </span><span style="color: #A626A4">:</span><span> </span><span style="color: #C18401">Debouncer</span><span>.</span><span style="color: #C18401">State</span>
<span>      </span><span style="color: #A0A1A7;font-style: italic">// ...</span>
<span>    </span><span style="color: #A626A4">}</span>

<span style="color: #A0A1A7;font-style: italic">// Model initialization</span>
<span style="color: #A626A4">let</span><span> </span><span style="color: #E45649">init</span><span style="color: #383A42"> </span><span style="color: #986801">()</span><span> </span><span style="color: #A626A4">=</span>
<span>    </span><span style="color: #A626A4">{</span><span> Debouncer </span><span style="color: #A626A4">=</span><span> Debouncer.create</span><span style="color: #986801">()</span>
<span>      </span><span style="color: #A0A1A7;font-style: italic">// ...</span>
<span>    </span><span style="color: #A626A4">}</span></code></pre>
<ol start="2">
<li>Register the message dedicated to the <code>Debouncer</code></li>
</ol>
<pre style="background-color: #FAFAFA;color: ;padding: 1em"><code><span style="color: #A0A1A7;font-style: italic">// Msg definition</span>
<span style="color: #A626A4">type</span><span> </span><span style="color: #C18401">Msg</span><span> </span><span style="color: #A626A4">=</span>
<span>    </span><span style="color: #A626A4">|</span><span> DebouncerSelfMsg </span><span style="color: #A626A4">of</span><span> </span><span style="color: #C18401">Debouncer.SelfMessage</span><span style="color: #A626A4">&lt;</span><span style="color: #C18401">Msg</span><span style="color: #A626A4">&gt;</span><span> </span><span style="color: #A0A1A7;font-style: italic">// This is the message used by the Debouncer</span>
<span>    </span><span style="color: #A626A4">|</span><span> ChangeValue </span><span style="color: #A626A4">of</span><span> </span><span style="color: #C18401">string</span><span> </span><span style="color: #A0A1A7;font-style: italic">// Message trigger each time the user type in the input</span>
<span>    </span><span style="color: #A626A4">|</span><span> EndOfInput </span><span style="color: #A0A1A7;font-style: italic">// Message we want to debounce</span></code></pre>
<ol start="3">
<li>Handle <code>DebouncerSelfMsg</code> in your update function</li>
</ol>
<pre style="background-color: #FAFAFA;color: ;padding: 1em"><code><span style="color: #A626A4">let</span><span> </span><span style="color: #A626A4">private</span><span> </span><span style="color: #E45649">update</span><span style="color: #383A42"> msg model </span><span style="color: #A626A4">=</span>
<span>    </span><span style="color: #A626A4">match</span><span> msg </span><span style="color: #A626A4">with</span>
<span>    </span><span style="color: #A626A4">|</span><span> DebouncerSelfMsg debouncerMsg </span><span style="color: #A626A4">-&gt;</span>
<span>        </span><span style="color: #A626A4">let</span><span> </span><span style="color: #A626A4">(</span><span style="color: #383A42">debouncerModel</span><span style="color: #A626A4">,</span><span> </span><span style="color: #383A42">debouncerCmd</span><span style="color: #A626A4">)</span><span> </span><span style="color: #A626A4">=</span><span> Debouncer.update debouncerMsg model.Debouncer</span>
<span>        </span><span style="color: #A626A4">{</span><span> model </span><span style="color: #A626A4">with</span><span> Debouncer </span><span style="color: #A626A4">=</span><span> debouncerModel </span><span style="color: #A626A4">},</span><span> debouncerCmd</span></code></pre>
<p><em>Please note we don't need to use <code>Cmd.map</code> over <code>debouncerCmd</code> because it return a <code>Msg</code> directly</em></p>
<ol start="4">
<li>Bounce <code>EndOfInput</code> each time the user types something in the input</li>
</ol>
<pre style="background-color: #FAFAFA;color: ;padding: 1em"><code><span style="color: #A626A4">let</span><span> </span><span style="color: #A626A4">private</span><span> </span><span style="color: #E45649">update</span><span style="color: #383A42"> msg model </span><span style="color: #A626A4">=</span>
<span>    </span><span style="color: #A626A4">match</span><span> msg </span><span style="color: #A626A4">with</span>
<span>    </span><span style="color: #A626A4">|</span><span> ChangeValue newValue </span><span style="color: #A626A4">-&gt;</span>
<span>        </span><span style="color: #A626A4">let</span><span> </span><span style="color: #A626A4">(</span><span style="color: #383A42">debouncerModel</span><span style="color: #A626A4">,</span><span> </span><span style="color: #383A42">debouncerCmd</span><span style="color: #A626A4">)</span><span> </span><span style="color: #A626A4">=</span>
<span>            model.Debouncer</span>
<span>            </span><span style="color: #A626A4">|&gt;</span><span> Debouncer.bounce </span><span style="color: #A626A4">(</span><span>TimeSpan.FromSeconds </span><span style="color: #986801">1.5</span><span style="color: #A626A4">)</span><span> </span><span style="color: #50A14F">&quot;user_input&quot;</span><span> EndOfInput</span>

<span>        </span><span style="color: #A626A4">{</span><span> model </span><span style="color: #A626A4">with</span><span> UserInput </span><span style="color: #A626A4">=</span><span> newValue</span>
<span>                     State </span><span style="color: #A626A4">=</span><span> State.IsTyping</span>
<span>                     Debouncer </span><span style="color: #A626A4">=</span><span> debouncerModel </span><span style="color: #A626A4">},</span><span> Cmd.batch </span><span style="color: #A626A4">[</span><span> Cmd.map DebouncerSelfMsg debouncerCmd </span><span style="color: #A626A4">]</span></code></pre>
<p><code>Debouncer.bounce</code> parameters:</p>
<pre style="background-color: #FAFAFA;color: ;padding: 1em"><code><span style="color: #A626A4">val</span><span> </span><span style="color: #E45649">bounce</span><span style="color: #A626A4">:</span>
<span>   delay       </span><span style="color: #A626A4">:</span><span> TimeSpan        </span><span style="color: #A626A4">-&gt;</span><span> </span><span style="color: #A0A1A7;font-style: italic">// Delay before trying to send `msgToSend`</span>
<span>   id          </span><span style="color: #A626A4">:</span><span> Debouncer.Id    </span><span style="color: #A626A4">-&gt;</span><span> </span><span style="color: #A0A1A7;font-style: italic">// Id used to identify the message in the debouncer. This is useful if you want to debounce a different message</span>
<span>   msgToSend   </span><span style="color: #A626A4">:</span><span> &#039;a              </span><span style="color: #A626A4">-&gt;</span><span> </span><span style="color: #A0A1A7;font-style: italic">// The `Msg` to send</span>
<span>   currentState</span><span style="color: #A626A4">:</span><span> Debouncer.State    </span><span style="color: #A0A1A7;font-style: italic">// Current debouncer state</span>
<span>              </span><span style="color: #A626A4">-&gt;</span><span> Debouncer.State </span><span style="color: #A626A4">*</span><span> Cmd</span><span style="color: #A626A4">&lt;</span><span>Debouncer.SelfMessage</span><span style="color: #A626A4">&lt;</span><span>&#039;a</span><span style="color: #A626A4">&gt;&gt;</span></code></pre>
</div></div></section><div class="navigation-container"><button class="button is-outlined is-primary navigate-to-previous"><span class="icon"><i class=" fas fa-arrow-left"></i></span><span class="is-uppercase text">Previous</span></button><button class="button is-outlined is-primary navigate-to-next"><span class="is-uppercase text">Next</span><span class="icon"><i class=" fas fa-arrow-right"></i></span></button></div></div><div class="column full-height-scrollable-content toc-column is-hidden-touch is-2-desktop"><div><nav class="toc-container"><ul class="toc-headings"><div class="toc-label"><a href="#Kezako">Kezako ?</a></div></li><div class="toc-label"><a href="#Demo">Demo</a></div></li><div class="toc-label"><a href="#How-to-use">How to use ?</a></div></li></ul></nav></div></div></div><div class="is-hidden-touch material-like-container is-for-desktop"><div class="material-like-button scroll-to-top"><span class="icon is-medium"><i class=" fas fa-angle-up fa-lg"></i></span></div></div><div class="is-hidden-desktop material-like-container is-for-touch"><div class="material-like-container-body"><div class="material-like-button toggle-toc"><span class="icon is-medium"><i class=" fas fa-ellipsis-v fa-lg"></i></span><div class="material-like-button-label">Table of content</div></div><div class="material-like-button scroll-to-top"><span class="icon is-medium"><i class=" fas fa-angle-up fa-lg"></i></span><div class="material-like-button-label">Scroll to top</div></div></div><div class="material-like-button close-open-button"><span class="icon is-medium"><i class=" fas fa-plus fa-lg"></i></span></div></div></div><script type="text/javascript">
nacara.pageId = 'index';
                                        </script><script type="text/javascript">window.addEventListener("DOMContentLoaded", () => {

    const refContainer = document.querySelector(".toc-scrollable-container");

    // Listener used to update the active section in the TOC
    refContainer.addEventListener("scroll", () => {
        const headers = document.querySelectorAll("h2, h3, h4");

        // In order tof in the active section, we iterate over all the header
        // from the bottom to the top.
        // We take the first header that is "above" the top position of the window + 60px
        const inversedHeaders =
            [...headers]
                .sort( (headerA, headerB) => {
                    return headerB.getBoundingClientRect().top - headerA.getBoundingClientRect().top;
                });

        let activeHeader = null;

        for (let index = 0; index < inversedHeaders.length; index++) {
            const header = inversedHeaders[index];
            if (header.getBoundingClientRect().top < 60) {
                activeHeader = header;
                break;
            }
        }


        if (activeHeader === null)
            return;

        const anchorTag = activeHeader.querySelector("a").getAttribute("href");

        // Make sure to remove `is-active` to all the TOC anchor elements
        document
            .querySelectorAll(".toc-container a")
            .forEach(anchor => {
                anchor.classList.remove("is-active");
            });

        // Set `is-active` to the current section
        document
            .querySelector(`.toc-container a[href="${anchorTag}"]`)
            .classList.add("is-active");
    });

    document
        .querySelector(".material-like-button.toggle-toc")
        .addEventListener("click", () => {
            document
                .querySelector(".toc-container")
                .classList.toggle("force-show");

            document
                .querySelector(".column.toc-column")
                .classList.toggle("force-show");
        });

});
</script><script type="text/javascript">window.addEventListener("DOMContentLoaded", () => {

    const refContainer = document.querySelector(".toc-scrollable-container");

    // Register scroll to top button
    document
        .querySelectorAll(".scroll-to-top")
        .forEach(element => {
            element.addEventListener("click", () => {
                document
                    .querySelector(".toc-scrollable-container")
                    .scrollTo(0, 0);
            });
        });

    // Listener used to update the position of TOC button at the bottom of the page
    refContainer.addEventListener("scroll", () => {

        // If we are at the end of the element
        // Source: https://developer.mozilla.org/fr/docs/Web/API/Element/scrollHeight#D%C3%A9terminer_si_un_%C3%A9l%C3%A9ment_a_compl%C3%A8tement_%C3%A9t%C3%A9_d%C3%A9fil%C3%A9
        if (refContainer.scrollTop > 30) {
            document
                .querySelector(".material-like-container.is-for-desktop")
                .classList
                .remove("hide");
        } else {
            document
                .querySelector(".material-like-container.is-for-desktop")
                .classList
                .add("hide");
        }
    });

    const bodyContainer = document.querySelector(".material-like-container.is-for-touch .material-like-container-body");

    document
        .querySelector(".material-like-button.close-open-button")
        .addEventListener("click", () => {
            bodyContainer.classList.toggle("show");
            document
                .querySelector(".material-like-button.close-open-button")
                .classList.toggle("is-open");
    });

});
</script></div></body></html>